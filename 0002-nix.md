---
layout: default
title: "Nix + Sail"
date: 2025-10-08
categories: Blog
---

# ğŸ§  Experimentando con Sail y Nix: entornos reproducibles para Data y Rust

En este trabajo hemos estado integrando **Sail** â€”el motor de ejecuciÃ³n inspirado en Spark, desarrollado en Rust sobre DataFusionâ€” con **Nix**, para facilitar la creaciÃ³n de entornos de desarrollo completamente reproducibles.

La idea es sencilla: poder _â€œjugarâ€ con Sail en local_ sin tener que montar entornos virtuales, manejar dependencias a mano o lidiar con incompatibilidades de versiones.

---

## ğŸš€ Â¿Por quÃ© Nix?

Porque Nix nos permite definir el **entorno completo como cÃ³digo**.  
Con un solo comando (`nix develop`), tienes Rust, Sail, DataFusion, Protobuf, y todas las dependencias necesarias configuradas de forma idÃ©ntica en cualquier mÃ¡quina.

Esto significa:

- Sin `virtualenvs` ni `pip install`.
- Sin conflictos entre versiones de crates o librerÃ­as del sistema.
- Sin â€œen mi mÃ¡quina sÃ­ funcionaâ€.

Y lo mejor: puedes usarlo tanto para _desarrollar Sail_ como para _ejecutar tus propios planes de prueba o prototipos locales_ sin depender de entornos externos.

**Nota:** En este caso como sail no se encuentra en los repositorios de nix, se tiene que instalar todo, en un futuro puede que sÃ­ tengo tiempo mire a ver como subir y contribuir con pysail, de todas formas si alguien estÃ¡ interesado o sabe como contribuir no dude en ello.

---

## ğŸ§© Â¿QuÃ© incluye estos dos flakes?

Tenemos un servidor y un cliente, ademÃ¡s en el cliente tenemos un ejemplo simple de cÃ³digo PySpark

En otras palabras, un entorno completo para **continuar jugando** ğŸ˜„

---

## ğŸ§­ CÃ³mo probarlo

Podemos ir a mi carpeta de flakes https://github.com/davidlghellin/nix-os/tree/master/flakes/sail

```bash
git clone https://github.com/davidlghellin/nix-os.git
cd flakes/sail
```

Y tendremos un server y un cliente con un ejemplo bÃ¡sico.

```bash
cd sail-server
nix develop
# Levanta el servidor
launch-sail-server
# o modo debug:
debug-sail-server
```

```bash
cd sail-client
nix develop
# Test rÃ¡pido
spark-connect-test
```
